# Store the list of currently staged files
STAGED_FILES=$(git diff --cached --name-only)

# Run formatters and linter fixes
npm run format && \
npm run lint:fix

# Re-stage only the files that were previously staged
if [ -n "$STAGED_FILES" ]; then
    echo "$STAGED_FILES" | xargs git add
fi

# Run final checks
npm run lint && \
npm run build
